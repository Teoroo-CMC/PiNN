<!--
  This Basic theme serves as an example for how to create other
  themes by demonstrating the features with minimal HTML and CSS.
  Comments like this will be through the code to explain briefly
  what each feature is and point you to the MkDocs documentation
  to find out more.
-->
<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <!--
    The page_title contains the title for a page as shown in the navigation.
    Site name contains the name as defined in the mkdocs.yml
  -->
  <title>Migration - PiNN</title>

  <link rel="stylesheet" href="../css/theme.css">
  <link rel="stylesheet" href="../css/pygments.css">
  <link rel="icon" href="data:,">
  
    <link href="../assets/_mkdocstrings.css" rel="stylesheet">
  
    <link href="../css/extra.css" rel="stylesheet">
  

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,600;1,400;1,700&family=Noto+Sans:ital,wght@0,400;0,600;1,400;1,600&display=swap" rel="stylesheet">
  <script
  src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
  integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E="
  crossorigin="anonymous"></script>

  <script>
    var base_url = "..";
    $(document).ready(function(){
          $('table').wrap('<div class="table-wrapper"></div>');
    });
  </script>

  <script src="../js/mike.js"></script>

  
    <script src="../js/mathjax.js"></script>
  
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  
    <script src="https://cdn.jsdelivr.net/npm/mathjax@4.0.0-beta.3/tex-chtml-nofont.js"></script>
  

</head>

<body>
  <header class="header">
    <ul>
      <li id="logo">
        <a href=".."><span>Pi</span>NN</a>
      </li>
      
      
  
  <li class="active tab" >
    <a href="..">
      Home
    </a>
  </li>

      
      
  
  <li  class="tab" >
    <a href="../usage/overview/">
      Usage
    </a>
  </li>

      
      
  
  <li  class="tab" >
    <a href="../notebooks/overview/">
      Notebooks
    </a>
  </li>

      
      <li class="tools">
        
          <a id="nav-toggle" class="tool" onclick="nav_toggle()">
        
          <svg><use xlink:href="../svg/sprite.svg#menu-2"></use></svg>
        </a>
        <script>
           function nav_toggle() {
               var bar = document.getElementById("tab-bar");
               if (bar.style.display === "none") {
                   bar.style.display = "block";
               } else {
                   bar.style.display = "none";
               }
           }
          function nav_reset() {
              var bar = document.getElementById("tab-bar");
              if (window.innerWidth>950){
                  bar.style.display = "block";
              } else {
                  bar.style.display = "none";
              }
          }
          window.onresize = nav_reset;
        </script>
        
        <a class="tool">
          <svg><use xlink:href="../svg/sprite.svg#tag"></use></svg>
          <div class="version"></div>
        </a>
        
        
        <a class="tool" href="https://github.com/teoroo-cmc/pinn/">
          <svg><use xlink:href="../svg/sprite.svg#brand-github"></use></svg>
          <span>teoroo-cmc/pinn</span>
        </a>
        
      </li>
    </ul>
  </header>


  <div id="main">
    <div id="tab-bar">
      <ul>
      
       
  
  <li class="active tab" >
    <a href="..">
      Home
    </a>
  </li>

         
           <div class="nav-bar">
             <ul>
               
                 
                   
    <li >
      <a href=".." class="">
        Introduction
      </a>
    </li>

                 
                   
    <li >
      <a href="../changelog/" class="">
        Changelog
      </a>
    </li>

                 
                   
    <li class="active">
      <a href="./" class="">
        Migration
      </a>
    </li>

                 
               
             </ul>
           </div>
         
      
       
  
  <li  class="tab" >
    <a href="../usage/overview/">
      Usage
    </a>
  </li>

         
           <div class="nav-bar">
             <ul>
               
             </ul>
           </div>
         
      
       
  
  <li  class="tab" >
    <a href="../notebooks/overview/">
      Notebooks
    </a>
  </li>

         
           <div class="nav-bar">
             <ul>
               
             </ul>
           </div>
         
      
      </ul>
    </div>

    <div id="content">
      <h1 id="migrating-to-pinn-1x-tf2">Migrating to PiNN 1.x (TF2)</h1>
<p>Since version 1.x, PiNN switched to TensorFlow 2 as a backend, this introduces
changes to the API. This document provides information for the changes and
guides for migration.</p>
<h2 id="new-features">New features</h2>
<p><strong>CLI</strong>:
PiNN 1.x introduces a new entry point <code>pinn</code> as the command line interface. The
trainer module will be replaced with the <code>pinn train</code> sub-command. The CLI also
exposes utilities like dataset conversion for easier usage.</p>
<p><strong>Parameter file</strong>: 
in PiNN 1.0 the parameter file will serve as a comprehensive input for PiNN
models, the structure of the parameter file is changed, see the documentation
for more information.</p>
<p><strong>Extended Kalman filter</strong>:
an experimental extended Kalman filter (EKF) optimizer is implemented.</p>
<h2 id="notes-for-developers">Notes for developers</h2>
<ul>
<li>Documentation is now built with mkdocs.</li>
<li>Documentation is moved to Github pages.</li>
<li>Continuous integration is moved to Github Actions.</li>
<li>The Docker Hub repo is now <a href="https://hub.docker.com/repository/docker/teoroo/pinn">teoroo/pinn</a>.</li>
</ul>
<p><strong>Datasets</strong>: dataset loaders should be most compatible with PiNN 0.x. With the
TF2 update, dataset may be inspected interactively with eager execution.
Splitting option is simplified (see below), and splitting of <code>load_tfrecord</code>
becomes possible.</p>
<p><strong>Networks</strong>: following the guideline of TF2, networks in PiNN 1.x are new Keras
models and layers becomes Keras layers. This means the PiNN networks can be used
to perform some simple prediction tasks. Note that PiNN models are still
implemented as TensorFlow estimators since they provide a better control over
the training and prediction behavior. Like the design of PiNN 0.x, the models
interpret the predictions of PiNN networks as physical quantities and interface
them to atomic simulation packages.</p>
<p><strong>Models</strong>:
new helper function <code>export_mode</code> and class <code>MetricsCollector</code> are implemented to
simplify the implementation of models, see the source of <a href="https://github.com/Teoroo-CMC/PiNN/blob/TF2/pinn/models/dipole.py">dipole
model</a> for an
example.</p>
<h2 id="breaking-changes">Breaking changes</h2>
<ul>
<li>Models trained in PiNN 0.x will not be usable in PiNN 1.x.</li>
<li>Model parameters need to be adapted to the new parameter format.</li>
<li>For dataset loaders <code>load_*</code>:<ul>
<li>the <code>split</code> argument is renamed to <code>splits</code>;</li>
<li>splitting is disabled by default;</li>
<li>nested splits like <code>{'train':1, 'test':[1,2,3]}</code> is not supported anymore.</li>
</ul>
</li>
<li><code>format_dict</code> is renamed as <code>ds_spec</code> to be consistent with
  <a href="https://www.tensorflow.org/api_docs/python/tf/data/DatasetSpec">TensorFlow</a>.</li>
</ul>
    </div>

  </div>

  <div class="page">
    <div class="page-prev">
      
      <a href="../changelog/" title="Changelog"><span>«</span> Previous</a>
      
    </div>
    <div class="page-next">
      
      <a href="../usage/overview/" title="Overview" />Next <span>»</span></a>
      
    </div>
  </div>

  <div class="footer">
    Built with <a href="https://www.mkdocs.org">mkdocs</a> and the <a href="https://github.com/yqshao/mkdocs-flux-theme">flux</a> theme.
  </div>
</body>
</html>