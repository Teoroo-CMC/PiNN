profiles {
  standard {
    singularity.enabled = true
    process.container = "docker://teoroo/pinn:v1.1.0-cpu"
    process.scratch = true
  }
  dev {
    singularity.enabled = false
  }
  alvis {
    // HPC Cluster for benchmarking, to setup the environments, use
    // the system TensorFlow installation and install PiNN in venv,
    // i.e.:
    // ```
    // ml TensorFlow/2.6.0-foss-2021a-CUDA-11.3.1
    // python -m venv $HOME/pinn-tf26
    // source $HOME/pinn-tf26/bin/activate
    // # then install PiNN in editable mode
    // ```
    // You sould also provide you SLURM account, e.g. in your `.bashrc`
    // ```
    // export SLURM_ACCOUNT=NAISS2023-5-282
    // export SALLOC_ACCOUNT=$SLURM_ACCOUNT
    // export SBATCH_ACCOUNT=$SLURM_ACCOUNT
    // ```
    singularity.enabled = false
    process.scratch = true
    process.time = '3d'
    process.clusterOptions = '--gres=gpu:T4:1'
    beforeScript = 'source $HOME/pinn-tf26/bin/activate'
    module = 'TensorFlow/2.6.0-fosscuda-2021a-CUDA-11.3.1'
    executor{
      name = 'slurm'
      queueSize = 20
      submitRateLimit = '120 min'
    }
  }
}

manifest.mainScript = 'nextflow/main.nf'
